<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <p id="p">111</p>
        <button id="button">121212111</button>
    </div>
    <script>
        document.getElementById("button").addEventListener("click",function(){
            document.body.innerHTML=`111`
        })
       
        var observeDOMChanges = (function () {
            // 对变化的 dom 的操作
            var changedHandler = function (element) {
                // do with element ...
                console.log(element,"element")
            };
            // 兼容浏览器前缀
            var MutationObserver = window.MutationObserver ||
                                window.WebKitMutationObserver ||
                                window.MozMutationObserver;
            // MutationObserver 配置
            var MutationObserverConfig = {
                // 监听子节点
                childList: true,
                // 监听 href 属性
                attributes: true,
                // 监听整棵树
                subtree: true
            };
            // 监听器
            var observer = MutationObserver ? new MutationObserver(function (mutations) {
                mutations.forEach(function (mutation) {
                    // 处理 变化的 DOM
                    changedHandler(mutation.target);
                    // 处理 新增的 DOM
                    if (mutation.addedNodes) {
                        mutation.addedNodes.forEach(changedHandler);
                    }
                    // 删除的 DOM 无需处理 (mutation.removedNodes)
                });
            }) : undefined;
            
            return observer ? function () {
                    observer.observe(document.body, MutationObserverConfig);
                } : function () {
                    console.log('MutationObserver not support!');
                };
            })();
        observeDOMChanges()
    </script>
</body>
</html>